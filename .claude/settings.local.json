{
  "permissions": {
    "allow": [
      "Bash(git init:*)",
      "Bash(git branch:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git remote add:*)",
      "Bash(git push:*)",
      "Bash(python -c:*)",
      "Bash(python -X utf8 -c:*)",
      "Bash(python -m pytest:*)",
      "Bash(pip install:*)",
      "Bash(git status:*)",
      "Bash(ruff check:*)",
      "Bash(python -m ruff check:*)",
      "Bash(python -m ruff format:*)",
      "Bash(npx @anthropic-ai/skills add:*)",
      "Bash(claude skills add:*)",
      "Bash(git clone:*)",
      "Bash(npx next build:*)",
      "Bash(pnpm build:*)",
      "Bash(pnpm install:*)",
      "Bash(npx --yes typescript@5.3:*)",
      "Bash(npx tsc:*)",
      "Bash(ssh root@76.13.46.55:*)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwMDAwMDAwMC0wMDAwLTQwMDAtYTAwMC0wMDAwMDAwMDAwMTAiLCJ0aWQiOiIwMDAwMDAwMC0wMDAwLTQwMDAtYTAwMC0wMDAwMDAwMDAwMDEiLCJyb2xlIjoic3VwZXJfYWRtaW4iLCJlbWFpbCI6Im5pY29sYXNAY2xpeGl0ZS5iZSIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE3NzEyNTU3ODYsImV4cCI6MTc3MTI1NzU4Nn0.ALt9kEp60aFBjBgimjkhVEO4cnxxDhxbm8FqlyQ7Lt8\")",
      "Bash(TID=\"00000000-0000-4000-a000-000000000001\")",
      "Bash(__NEW_LINE_9959e563acbe891c__ ssh root@76.13.46.55 \"curl -s https://lexibel.clixite.cloud/api/v1/cases -H ''Authorization: Bearer $TOKEN'' -H ''X-Tenant-ID: $TID''\")",
      "Bash(__NEW_LINE_6ede7080d5f5f07e__ ssh root@76.13.46.55 \"curl -s https://lexibel.clixite.cloud/api/v1/contacts -H ''Authorization: Bearer $TOKEN'' -H ''X-Tenant-ID: $TID''\")",
      "Bash(__NEW_LINE_2f3ae6130571136f__ ssh root@76.13.46.55 \"curl -s https://lexibel.clixite.cloud/api/v1/invoices -H ''Authorization: Bearer $TOKEN'' -H ''X-Tenant-ID: $TID''\")",
      "Bash(__NEW_LINE_66734195911da5cb__ ssh root@76.13.46.55 \"curl -s https://lexibel.clixite.cloud/api/v1/time-entries -H ''Authorization: Bearer $TOKEN'' -H ''X-Tenant-ID: $TID''\")",
      "Bash(ssh:*)",
      "WebFetch(domain:lexibel.clixite.cloud)",
      "Bash(python3 -c \"\nimport urllib.request, json, base64, uuid, ssl\n\n# Skip SSL verification for testing\nctx = ssl.create_default_context\\(\\)\nctx.check_hostname = False\nctx.verify_mode = ssl.CERT_NONE\n\nBASE = ''https://lexibel.clixite.cloud/api/v1''\n\n# Login\nlogin_data = json.dumps\\({''email'': ''nicolas@clixite.be'', ''password'': ''LexiBel2026!''}\\).encode\\(\\)\nreq = urllib.request.Request\\(f''{BASE}/auth/login'', data=login_data, headers={''Content-Type'': ''application/json''}\\)\nresp = urllib.request.urlopen\\(req, context=ctx\\)\ntokens = json.loads\\(resp.read\\(\\)\\)\ntoken = tokens[''access_token'']\npayload_b64 = token.split\\(''.''\\)[1] + ''==''\nclaims = json.loads\\(base64.urlsafe_b64decode\\(payload_b64\\)\\)\nuser_id = claims[''sub'']\nprint\\(f''1. Login: OK \\(user={user_id}\\)''\\)\n\nheaders = {''Content-Type'': ''application/json'', ''Authorization'': f''Bearer {token}''}\n\ndef get\\(path\\):\n    req = urllib.request.Request\\(f''{BASE}{path}'', headers=headers\\)\n    resp = urllib.request.urlopen\\(req, context=ctx\\)\n    return resp.status, json.loads\\(resp.read\\(\\)\\)\n\ndef post\\(path, data\\):\n    req = urllib.request.Request\\(f''{BASE}{path}'', data=json.dumps\\(data\\).encode\\(\\), headers=headers, method=''POST''\\)\n    resp = urllib.request.urlopen\\(req, context=ctx\\)\n    return resp.status, json.loads\\(resp.read\\(\\)\\)\n\ndef patch\\(path, data\\):\n    req = urllib.request.Request\\(f''{BASE}{path}'', data=json.dumps\\(data\\).encode\\(\\), headers=headers, method=''PATCH''\\)\n    resp = urllib.request.urlopen\\(req, context=ctx\\)\n    return resp.status, json.loads\\(resp.read\\(\\)\\)\n\n# Health\ncode, data = get\\(''/health''\\)\nprint\\(f''2. GET /health: {code}''\\)\n\n# Cases\ncode, data = get\\(''/cases''\\)\nprint\\(f''3. GET /cases: {code} \\({data[\"\"total\"\"]} cases\\)''\\)\n\n# Create a case\nref = ''E2E-'' + str\\(uuid.uuid4\\(\\)\\)[:6].upper\\(\\)\ncode, case = post\\(''/cases'', {''reference'': ref, ''title'': ''E2E test case'', ''matter_type'': ''penal'', ''responsible_user_id'': user_id}\\)\nprint\\(f''4. POST /cases: {code} \\(id={case[\"\"id\"\"][:8]}..., metadata={case[\"\"metadata\"\"]}\\)''\\)\ncase_id = case[''id'']\n\n# Get single case\ncode, data = get\\(f''/cases/{case_id}''\\)\nprint\\(f''5. GET /cases/{{id}}: {code} \\(ref={data[\"\"reference\"\"]}\\)''\\)\n\n# Update case\ncode, data = patch\\(f''/cases/{case_id}'', {''title'': ''E2E updated''}\\)\nprint\\(f''6. PATCH /cases/{{id}}: {code} \\(title={data[\"\"title\"\"]}\\)''\\)\n\n# Contacts\ncode, data = get\\(''/contacts''\\)\nprint\\(f''7. GET /contacts: {code} \\({data[\"\"total\"\"]} contacts\\)''\\)\n\n# Create contact\ncode, contact = post\\(''/contacts'', {''full_name'': ''E2E Test Contact'', ''type'': ''individual'', ''language'': ''fr''}\\)\nprint\\(f''8. POST /contacts: {code} \\(id={contact[\"\"id\"\"][:8]}...\\)''\\)\n\n# Inbox\ncode, data = get\\(''/inbox''\\)\nprint\\(f''9. GET /inbox: {code} \\({data[\"\"total\"\"]} items\\)''\\)\n\n# Time entries\ncode, data = get\\(''/time-entries''\\)\nprint\\(f''10. GET /time-entries: {code} \\({data[\"\"total\"\"]} entries\\)''\\)\n\n# Invoices\ncode, data = get\\(''/invoices''\\)\nprint\\(f''11. GET /invoices: {code} \\({data[\"\"total\"\"]} invoices\\)''\\)\n\n# Third party entries\ncode, data = get\\(f''/third-party-entries?case_id={case_id}''\\)\nprint\\(f''12. GET /third-party-entries: {code}''\\)\n\n# Users\ncode, data = get\\(''/users''\\)\nprint\\(f''13. GET /users: {code} \\({len\\(data[\"\"items\"\"]\\)} users\\)''\\)\n\n# Roles\ncode, data = get\\(''/roles''\\)\nprint\\(f''14. GET /roles: {code}''\\)\n\n# Audit log\ncode, data = get\\(''/audit-logs''\\)\nprint\\(f''15. GET /audit-logs: {code} \\({data[\"\"total\"\"]} entries\\)''\\)\n\n# Timeline\ncode, data = get\\(f''/timeline?case_id={case_id}''\\)\nprint\\(f''16. GET /timeline: {code}''\\)\n\n# Case sub-resources\ncode, data = get\\(f''/cases/{case_id}/contacts''\\)\nprint\\(f''17. GET /cases/{{id}}/contacts: {code}''\\)\n\ncode, data = get\\(f''/cases/{case_id}/time-entries''\\)\nprint\\(f''18. GET /cases/{{id}}/time-entries: {code}''\\)\n\ncode, data = get\\(f''/cases/{case_id}/documents''\\)\nprint\\(f''19. GET /cases/{{id}}/documents: {code}''\\)\n\nprint\\(\\)\nprint\\(''=== ALL 19 ENDPOINTS VERIFIED ===''\\)\n\")",
      "Bash(python3 -c \"\nimport urllib.request, json, base64, uuid, ssl\n\nctx = ssl.create_default_context\\(\\)\nctx.check_hostname = False\nctx.verify_mode = ssl.CERT_NONE\n\nBASE = ''https://lexibel.clixite.cloud/api/v1''\n\n# Login\nlogin_data = json.dumps\\({''email'': ''nicolas@clixite.be'', ''password'': ''LexiBel2026!''}\\).encode\\(\\)\nreq = urllib.request.Request\\(f''{BASE}/auth/login'', data=login_data, headers={''Content-Type'': ''application/json''}\\)\nresp = urllib.request.urlopen\\(req, context=ctx\\)\ntokens = json.loads\\(resp.read\\(\\)\\)\ntoken = tokens[''access_token'']\npayload_b64 = token.split\\(''.''\\)[1] + ''==''\nclaims = json.loads\\(base64.urlsafe_b64decode\\(payload_b64\\)\\)\nuser_id = claims[''sub'']\nprint\\(f''1. Login: OK \\(user={user_id}\\)''\\)\n\nheaders = {''Content-Type'': ''application/json'', ''Authorization'': f''Bearer {token}''}\n\ndef get\\(path\\):\n    req = urllib.request.Request\\(f''{BASE}{path}'', headers=headers\\)\n    resp = urllib.request.urlopen\\(req, context=ctx\\)\n    return resp.status, json.loads\\(resp.read\\(\\)\\)\n\ndef post\\(path, data\\):\n    req = urllib.request.Request\\(f''{BASE}{path}'', data=json.dumps\\(data\\).encode\\(\\), headers=headers, method=''POST''\\)\n    resp = urllib.request.urlopen\\(req, context=ctx\\)\n    return resp.status, json.loads\\(resp.read\\(\\)\\)\n\ndef patch\\(path, data\\):\n    req = urllib.request.Request\\(f''{BASE}{path}'', data=json.dumps\\(data\\).encode\\(\\), headers=headers, method=''PATCH''\\)\n    resp = urllib.request.urlopen\\(req, context=ctx\\)\n    return resp.status, json.loads\\(resp.read\\(\\)\\)\n\nresults = []\ndef check\\(label, fn\\):\n    try:\n        result = fn\\(\\)\n        results.append\\(\\(label, ''OK'', result\\)\\)\n        print\\(f''{label}: OK - {result}''\\)\n    except Exception as e:\n        results.append\\(\\(label, ''FAIL'', str\\(e\\)\\)\\)\n        print\\(f''{label}: FAIL - {e}''\\)\n\n# Health\ncheck\\(''2. GET /health'', lambda: get\\(''/health''\\)[0]\\)\n\n# Cases CRUD\ncheck\\(''3. GET /cases'', lambda: f\"\"{get\\(''/cases''\\)[1][''total'']} cases\"\"\\)\n\nref = ''E2E-'' + str\\(uuid.uuid4\\(\\)\\)[:6].upper\\(\\)\ncase_result = post\\(''/cases'', {''reference'': ref, ''title'': ''E2E test case'', ''matter_type'': ''penal'', ''responsible_user_id'': user_id}\\)\ncase_id = case_result[1][''id'']\ncheck\\(''4. POST /cases'', lambda: f\"\"201, metadata={case_result[1][''metadata'']}\"\"\\)\n\ncheck\\(''5. GET /cases/id'', lambda: get\\(f''/cases/{case_id}''\\)[1][''reference'']\\)\ncheck\\(''6. PATCH /cases/id'', lambda: patch\\(f''/cases/{case_id}'', {''title'': ''E2E updated''}\\)[1][''title'']\\)\n\n# Contacts CRUD \\(type must be natural or legal\\)\ncheck\\(''7. GET /contacts'', lambda: f\"\"{get\\(''/contacts''\\)[1][''total'']} contacts\"\"\\)\ncontact_result = post\\(''/contacts'', {''full_name'': ''E2E Test Contact'', ''type'': ''natural'', ''language'': ''fr''}\\)\ncontact_id = contact_result[1][''id'']\ncheck\\(''8. POST /contacts'', lambda: f\"\"201, id={contact_id[:8]}...\"\"\\)\n\n# Inbox\ncheck\\(''9. GET /inbox'', lambda: f\"\"{get\\(''/inbox''\\)[1][''total'']} items\"\"\\)\n\n# Create inbox item\ncheck\\(''10. POST /inbox'', lambda: post\\(''/inbox'', {''source'': ''MANUAL'', ''raw_payload'': {''note'': ''E2E test''}}\\)[0]\\)\n\n# Time entries\ncheck\\(''11. GET /time-entries'', lambda: f\"\"{get\\(''/time-entries''\\)[1][''total'']} entries\"\"\\)\n\n# Invoices\ncheck\\(''12. GET /invoices'', lambda: f\"\"{get\\(''/invoices''\\)[1][''total'']} invoices\"\"\\)\n\n# Third party entries\ncheck\\(''13. GET /third-party-entries'', lambda: get\\(f''/third-party-entries?case_id={case_id}''\\)[0]\\)\n\n# Users\ncheck\\(''14. GET /users'', lambda: f\"\"{len\\(get\\(''/users''\\)[1][''items'']\\)} users\"\"\\)\n\n# Roles\ncheck\\(''15. GET /roles'', lambda: get\\(''/roles''\\)[0]\\)\n\n# Audit log\ncheck\\(''16. GET /audit-logs'', lambda: f\"\"{get\\(''/audit-logs''\\)[1][''total'']} entries\"\"\\)\n\n# Timeline\ncheck\\(''17. GET /timeline'', lambda: get\\(f''/timeline?case_id={case_id}''\\)[0]\\)\n\n# Case sub-resources\ncheck\\(''18. GET /cases/id/contacts'', lambda: get\\(f''/cases/{case_id}/contacts''\\)[0]\\)\ncheck\\(''19. GET /cases/id/time-entries'', lambda: get\\(f''/cases/{case_id}/time-entries''\\)[0]\\)\ncheck\\(''20. GET /cases/id/documents'', lambda: get\\(f''/cases/{case_id}/documents''\\)[0]\\)\n\n# Link contact to case\ncheck\\(''21. POST /cases/id/contacts'', lambda: post\\(f''/cases/{case_id}/contacts'', {''contact_id'': contact_id, ''role'': ''client''}\\)[0]\\)\n\n# Conflict check\ncheck\\(''22. POST /cases/id/conflict-check'', lambda: post\\(f''/cases/{case_id}/conflict-check'', {}\\)[0]\\)\n\npassed = sum\\(1 for _, s, _ in results if s == ''OK''\\)\nfailed = sum\\(1 for _, s, _ in results if s == ''FAIL''\\)\nprint\\(f''\\\\n=== {passed} PASSED, {failed} FAILED out of {len\\(results\\)} endpoints ===''\\)\n\")"
    ]
  }
}
